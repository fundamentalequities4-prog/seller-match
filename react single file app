vercel.json (example)

```json
{
  "version": 2,
  "builds": [
    { "src": "package.json", "use": "@vercel/static-build" }
  ],
  "routes": [
    { "src": "/(.*)", "dest": "/index.html" }
  ]
}
```

---

.env.example (fill and paste into Vercel environment variables when importing)

```
VITE_SUPABASE_URL=https://<your-supabase-project-ref>.supabase.co
VITE_SUPABASE_ANON_KEY=<anon-public-key>
SUPABASE_SERVICE_ROLE_KEY=<service_role_key>  # store in Supabase secrets or Vercel but never in client
PAYFAST_MERCHANT_ID=<payfast_merchant_id>
PAYFAST_MERCHANT_KEY=<payfast_merchant_key>
PAYFAST_SANDBOX=true
NEXT_PUBLIC_SUBSCRIPTION_PRICE_RAND=29
ADMIN_EMAIL=fundamentalequities4@gmail.com
```

> NOTE: VITE_ prefix is used for client-visible env values. Keep `SUPABASE_SERVICE_ROLE_KEY` strictly server-side.

---

supabase/schema.sql (run in Supabase SQL editor after project creation)

```sql
-- Basic tables for SellerMatch
create table listings (
  id uuid primary key default gen_random_uuid(),
  title text not null,
  description text,
  price numeric not null,
  currency text default 'ZAR',
  location text,
  category text,
  image_url text,
  seller_id uuid references auth.users(id) on delete set null,
  created_at timestamptz default now()
);

create table subscriptions (
  id uuid primary key default gen_random_uuid(),
  user_id uuid references auth.users(id) on delete cascade,
  payfast_token text,
  status text,
  created_at timestamptz default now()
);

-- Row-level security is recommended; enable policies for public client usage
```

---

README_DEPLOY.md (step-by-step)

1. **Create a GitHub repo** named `seller-match` (private or public).
2. **Copy all files** from this canvas into the repo root (or download the canvas export and unzip into the repo).
3. **Import repository into Vercel**
   - In Vercel, click **Import Project** → connect to GitHub → select `seller-match`.
   - During import, set these Environment Variables from `.env.example` (you'll get the Supabase values in step 5):
     - `VITE_SUPABASE_URL`
     - `VITE_SUPABASE_ANON_KEY`
     - `SUPABASE_SERVICE_ROLE_KEY` (server-only)
     - `PAYFAST_MERCHANT_ID`
     - `PAYFAST_MERCHANT_KEY`
     - `PAYFAST_SANDBOX=true`
     - `NEXT_PUBLIC_SUBSCRIPTION_PRICE_RAND=29`
     - `ADMIN_EMAIL=fundamentalequities4@gmail.com`
4. **Create a Supabase project**
   - Go to Supabase dashboard → New Project → Project name: `seller-match` → Region: **EU (Frankfurt)** → create.
   - In Supabase, go to **Settings → API** and copy the Project URL and `anon` key. Paste them into Vercel env: `VITE_SUPABASE_URL` and `VITE_SUPABASE_ANON_KEY`.
   - Go to **Settings → Service API keys**, copy the `service_role` key. Paste it in Vercel env `SUPABASE_SERVICE_ROLE_KEY` (set as secret / server only).
5. **Run the SQL schema**
   - In Supabase → SQL Editor → paste `supabase/schema.sql` and run. This creates the `listings` and `subscriptions` tables.
6. **Configure Storage (optional)**
   - In Supabase → Storage → create bucket `images` and set public rules as needed.
7. **PayFast sandbox**
   - Create a PayFast sandbox merchant account and get `merchant_id` and `merchant_key`. Set those in Vercel env variables.
   - Use `PAYFAST_SANDBOX=true` for testing.
8. **Deploy**
   - Click `Deploy` in Vercel. The site will be available at `https://<your-vercel-subdomain>.vercel.app` (you can set `sellermatch.vercel.app` if available).
9. **Create admin user**
   - Open the site → Sign up with the admin email `fundamentalequities4@gmail.com` → verify email (Supabase will send verification link). The admin user registration flow can be used to promote the user in Supabase Auth metadata (`role: 'admin'`). Alternatively, you can run a SQL snippet to set a row in a `user_profiles` table to mark admin status. See `admin-instructions.md` for exact SQL.

---

admin-instructions.md (quick)

Run this SQL in Supabase to create an admin flag for your user (after they register):

```sql
-- Mark the user as admin (replace the email with the real user email)
create table if not exists user_profiles (
  id uuid references auth.users(id) primary key,
  email text,
  role text default 'user',
  created_at timestamptz default now()
);

-- Insert or update the admin row
with u as (
  select id, email from auth.users where email = 'fundamentalequities4@gmail.com'
)
insert into user_profiles (id, email, role)
select id, email, 'admin' from u
on conflict (id) do update set role = 'admin';
```

After that, the app's admin UI will check `user_profiles.role = 'admin'` to show admin options.

---
